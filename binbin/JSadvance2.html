<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .member{
            line-height: 1;
            color: #fff;
            border: 1px solid #999;
            background-color: red;
            padding-left:3px ;
            padding-right:3px ;
            text-align: center;
            margin-right: 10px;
            list-style: none;
            cursor: pointer;
        }
        #memberbox{
            display: flex;
            flex-direction: row;
            flex-wrap:wrap;
            align-items:flex-end;

            margin-top: 20px;
        }
    </style>
</head>
<body>
    <main>
        <ul>
            <li>shift:从数组中把第一个元素删除，并返回这个元素的值。</li>
            <li>unshift: 在数组的开头添加一个或更多元素，并返回新的长度</li>
            <li>push:在数组的中末尾添加元素，并返回新的长度</li>
            <li>pop:从数组中把最后一个元素删除，并返回这个元素的值。</li>
        </ul>
        <br>
        <div>
            <input type="text" id="inputNum">
            <button id="leftEnter">左侧入</button>
            <button id="rightEnter">右侧入</button>
            <button id="leftOut">左侧出</button>
            <button id="rightOut">右侧出</button>
            <button id="sortArr">排序</button>
        </div>
        <ul id ="memberbox">
        </ul>
    </main>
    <script>
        function init(){
            //input框的值
            var newNum = '';
            //用于渲染的list
            var list = [10, 33, 44, 22, 51, 11,80,12,23,43,54,23,54,76,87,98,21,40,33,55,22,43,43,54,65,54,65,23,54,23,34,54,56,67,78,12];
            //插入li的父元素
            var box = document.getElementById('memberbox');

            var reg = /^\d{2}$|100/gi;

            //如果初始list内有数据，则进行一次渲染
            if(list.length > 0){
                List(list,box);
            }

            //给每个按钮绑定事件
            var lEnter = document.getElementById('leftEnter');
            lEnter.addEventListener('click',function(){
                newNum = document.getElementById('inputNum');
                //队列长度不超过60
                if(list.length <=60){
                    //流程控制，输入框的值不能为空，而且要在10-100之间的而数字
                    if(newNum.value != '' && reg.test(newNum.value)){
                        leftEnter(list,newNum,box);
                    }else{
                        alert('输入框不能为空，请输入10-100之间的数字');
                    }
                }else{
                    alert('队列长度不能超过60！');
                }

            });

            var rEnter = document.getElementById('rightEnter');
            rEnter.addEventListener('click',function(){
                newNum = document.getElementById('inputNum');
                if(newNum.value != '' && reg.test(newNum.value)){
                    rightEnter(list,newNum,box);
                }else{
                    alert('不能为空');
                }
            });

            var lOut = document.getElementById('leftOut');
            lOut.addEventListener('click',function(){
                //流程控制，当list为空时，不能进行删除操作
                if(list.length != 0){
                    alert('你删除了第一个元素' + ' ' + leftOut(list,box));
                }else{
                    alert('队列已为空');
                }
            });

            var rOut = document.getElementById('rightOut');
            rOut.addEventListener('click',function(){
                if(list.length != 0){
                    alert('您删除了最后一个元素' + ' ' + rightOut(list,box));
                }else{
                    alert('队列已为空');
                }
            });

            var sortBtn = document.getElementById('sortArr');
            sortBtn.addEventListener('click',function(){
               sort(list,box);
            });
        };

        //传入list对象，输入框对象，以及list的渲染的父元素
        //从队列的头部入unshift()
        function leftEnter(arr,input,parentNode){
            arr.unshift(parseInt(input.value));
    //            重新渲染
            List(arr,parentNode);
    //            console.log(arr);
            input.value = '';
        };
        //从队列的尾部入push()
        function rightEnter(arr,input,parentNode){
            arr.push(parseInt(input.value));
            List(arr,parentNode);
    //            console.log(arr);
            input.value = '';
        };
        //传入list对象，以及list的渲染的父元素
        function leftOut(arr,parentNode){
            var re = arr.shift();
            List(arr,parentNode);
            return re;
        };
        function rightOut(arr,parentNode){
            var re = arr.pop();
            List(arr,parentNode);
            return re;
        };

        //渲染列表函数
        function List(arr,parentNode){
            var boxCon = '';
            for(var i = 0;i < arr.length;i ++){
                boxCon += '<li class="member">' + arr[i] + '</li>'
            }

            parentNode.innerHTML = boxCon;

            //给每一个class绑定方法，一定要在插入元素节点之后
            //给每一个li绑定点击删除方法
            var members = document.getElementsByClassName('member');
            //这里需要用到闭包
            for(var n = 0; n　< members.length;n ++){
                members[n].style.height = arr[n] * 5 + 'px';
                (function(e){
                    members[e].addEventListener('click',function(){
                        removeSelf(arr,e,parentNode);
                    });
                })(n);
            }

            console.log('1');
        };

        function removeSelf(arr,loca,parentNode){
            arr.splice(loca,1);
            console.log(arr);
            List(arr,parentNode);
        }

        function sort(arr,parentNode){
            //i用来记录第几次完整的排序，j是记录每一次完整的排序包含多少次小排序
            //而i每增加1，小排序就会减少1，因为每次完整的排序就会把最大的数置于最后
            var sava ;
            for(var i = 1;i < arr.length;i ++){
                for(var j = 0;j < arr.length - i;j ++){
                    if(arr[j] > arr[j + 1]){
                        sava = arr[j + 1];
                        arr[j + 1] = arr[j];
                        arr[j] = sava;
                        List(arr,parentNode);
                    }
                }
            }
        }

        //给按钮绑定函数，初始化渲染list
        init();

    </script>

</body>
</html>